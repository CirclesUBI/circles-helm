# Indexer DB
postgresql:
  enabled: true
  auth:
    username: doadmin
    database: index
    existingSecret: indexer-db-secret
  primary:
    persistence:
      size: 500Gi
    initdb:
      scripts:
        0.0.63.sql: |
          ALTER USER doamin WITH SUPERUSER;
  image:
    debug: true
# Blockchain Indexer
blockchainIndexer:
  enabled: true
  hubAddress: "0x29b9a7fBb8995b2423a71cC17cf9810798F6C543"
  indexerRPCGatewayURL: "http://xdai-nethermind.xdai:8545"
  indexerWebsocketURL: "http://0.0.0.0:8675"
  indexerBulkFlushIntervalInBlocks: "10"
  indexerBulkFlushTimeoutInSeconds: "240"
  startFromBlock: "12529458"

# Pathfinder proxy
pathfinderProxy:
  enabled: true
  port: "8675"
  corsOrigins: "https://circles.garden"
  upstream:
    serviceEndpoints: "http://pathfinder2:54389"
    healthEndpoints: "http://pathfinder2:8794"

ingress:
  enabled: true
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    kubernetes.io/ingress.class: traefik
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
    traefik.ingress.kubernetes.io/router.middlewares: pathfinder-cors@kubernetescrd
  host: "pathfinder.testing.circles.garden"
  tls:
    enabled: true
    secret: "pathfinder-tls"
  middlewares:
    cors:
      enabled: true
      name: cors
      origins:
        list:
          - https://preview-dev.circles.garden
          - https://preview-product.circles.garden
          - https://preview-review.circles.garden
          - https://preview-testing.circles.garden
        listRegex:
          - https:\/\/\w+\.circles\.garden

pathfinder:
  enabled: true
  indexerWSurl: ws://blockchain-indexer:8675
  internalCapacityGraph: /var/pathfinder2/data/capacity_graph.db
  externalCapacityGraph: /var/pathfinder2/data/capacity_graph.db
  rpcURL: http://pathfinder2:54389

